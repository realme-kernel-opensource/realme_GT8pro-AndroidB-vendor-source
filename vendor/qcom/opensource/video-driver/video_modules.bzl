load(":video_driver_build.bzl", "video_module_entry")

video_driver_modules = video_module_entry([":video_driver_headers"])
module_entry = video_driver_modules.register

module_entry(
    name = "msm_video",
    srcs = [
        "driver/vidc/src/msm_vidc_v4l2.c",
        "driver/vidc/src/msm_vidc_vb2.c",
        "driver/vidc/src/msm_vidc.c",
        "driver/vidc/src/msm_vdec.c",
        "driver/vidc/src/msm_venc.c",
        "driver/vidc/src/msm_vidc_driver.c",
        "driver/vidc/src/msm_vidc_state.c",
        "driver/vidc/src/msm_vidc_control.c",
        "driver/vidc/src/msm_vidc_control_ext.c",
        "driver/vidc/src/msm_vidc_buffer.c",
        "driver/vidc/src/msm_vidc_power.c",
        "driver/vidc/src/msm_vidc_probe.c",
        "driver/vidc/src/resources.c",
        "driver/vidc/src/resources_ext.c",
        "driver/vidc/src/firmware.c",
        "driver/vidc/src/msm_vidc_debug.c",
        "driver/vidc/src/msm_vidc_memory.c",
        "driver/vidc/src/msm_vidc_memory_ext.c",
        "driver/vidc/src/msm_vidc_fence.c",
        "driver/vidc/src/msm_vidc_synx.c",
        "driver/vidc/src/venus_hfi.c",
        "driver/vidc/src/venus_hfi_queue.c",
        "driver/vidc/src/hfi_packet.c",
        "driver/vidc/src/venus_hfi_response.c",
        "driver/platform/common/src/msm_vidc_platform.c",
        "driver/platform/common/src/msm_vidc_platform_ext.c",
        "driver/variant/common/src/msm_vidc_variant.c",
        ],
    config_srcs = {
        "CONFIG_MSM_VIDC_NIOBE" : [
            "driver/variant/iris3/src/msm_vidc_buffer_iris3.c",
            "driver/variant/iris3/src/msm_vidc_bus_iris3.c",
            "driver/variant/iris3/src/msm_vidc_clock_iris3.c",
            "driver/variant/iris3/src/msm_vidc_power_iris3.c",
            "driver/variant/iris3/src/msm_vidc_iris3.c",
            "driver/platform/niobe/src/msm_vidc_niobe.c",
        ],
        "CONFIG_MSM_VIDC_PINEAPPLE" : [
            "driver/variant/iris33/src/msm_vidc_buffer_iris33.c",
            "driver/variant/iris33/src/msm_vidc_bus_iris33.c",
            "driver/variant/iris33/src/msm_vidc_clock_iris33.c",
            "driver/variant/iris33/src/msm_vidc_power_iris33.c",
            "driver/variant/iris33/src/msm_vidc_iris33.c",
            "driver/platform/pineapple/src/msm_vidc_pineapple.c",
        ],
        "CONFIG_MSM_VIDC_SUN" : [
            "driver/variant/iris35/src/msm_vidc_buffer_iris35.c",
            "driver/variant/iris35/src/msm_vidc_bus_iris35.c",
            "driver/variant/iris35/src/msm_vidc_clock_iris35.c",
            "driver/variant/iris35/src/msm_vidc_power_iris35.c",
            "driver/variant/iris35/src/msm_vidc_iris35.c",
            "driver/platform/sun/src/msm_vidc_sun.c",
        ],
        "CONFIG_MSM_VIDC_CANOE" : [
            "driver/variant/iris4/src/msm_vidc_buffer_iris4.c",
            "driver/variant/iris4/src/msm_vidc_bus_iris4.c",
            "driver/variant/iris4/src/msm_vidc_clock_iris4.c",
            "driver/variant/iris4/src/msm_vidc_power_iris4.c",
            "driver/variant/iris4/src/msm_vidc_iris4.c",
            "driver/platform/canoe/src/msm_vidc_canoe.c",
            "driver/platform/alor/src/msm_vidc_alor.c",
        ],
        "CONFIG_MSM_VIDC_SERAPH" : [
            "driver/variant/iris4/src/msm_vidc_buffer_iris4.c",
            "driver/variant/iris4/src/msm_vidc_bus_iris4.c",
            "driver/variant/iris4/src/msm_vidc_clock_iris4.c",
            "driver/variant/iris4/src/msm_vidc_power_iris4.c",
            "driver/variant/iris4/src/msm_vidc_iris4.c",
            "driver/platform/seraph/src/msm_vidc_seraph.c",
        ],
        "CONFIG_MSM_VIDC_MINIDUMP": [
            "driver/vidc/src/msm_vidc_md.c",
        ],
    },
    deps = [
            "//vendor/qcom/opensource/mm-drivers:mm_drivers_headers",
            "//vendor/qcom/opensource/synx-kernel:synx_headers",
            "//vendor/qcom/opensource/synx-kernel:%b_modules",
            "//vendor/qcom/opensource/mm-drivers/hw_fence:%b_msm_hw_fence",
            "//vendor/qcom/opensource/mmrm-driver:%b_mmrm_driver",
        ],
)

module_entry(
    name = "video",
    srcs = [
        "driver/vidc/src/msm_vidc_v4l2.c",
        "driver/vidc/src/msm_vidc_vb2.c",
        "driver/vidc/src/msm_vidc.c",
        "driver/vidc/src/msm_vdec.c",
        "driver/vidc/src/msm_venc.c",
        "driver/vidc/src/msm_vidc_driver.c",
        "driver/vidc/src/msm_vidc_state.c",
        "driver/vidc/src/msm_vidc_control.c",
        "driver/vidc/src/msm_vidc_buffer.c",
        "driver/vidc/src/msm_vidc_power.c",
        "driver/vidc/src/msm_vidc_probe.c",
        "driver/vidc/src/resources.c",
        "driver/vidc/src/firmware.c",
        "driver/vidc/src/msm_vidc_debug.c",
        "driver/vidc/src/msm_vidc_memory.c",
        "driver/vidc/src/msm_vidc_fence.c",
        "driver/vidc/src/venus_hfi.c",
        "driver/vidc/src/venus_hfi_queue.c",
        "driver/vidc/src/hfi_packet.c",
        "driver/vidc/src/venus_hfi_response.c",
        "driver/platform/common/src/msm_vidc_platform.c",
        "driver/variant/common/src/msm_vidc_variant.c",
        ],
    config_srcs = {
        "CONFIG_MSM_VIDC_NIOBE" : [
            "driver/platform/niobe/src/niobe.c",
            "driver/variant/iris3/src/msm_vidc_buffer_iris3.c",
            "driver/variant/iris3/src/msm_vidc_power_iris3.c",
            "driver/variant/iris3/src/msm_vidc_bus_iris3.c",
            "driver/variant/iris3/src/msm_vidc_clock_iris3.c",
            "driver/variant/iris3/src/msm_vidc_iris3.c",
        ],
        "CONFIG_MSM_VIDC_PINEAPPLE" : [
            "driver/platform/pineapple/src/pineapple.c",
            "driver/variant/iris33/src/msm_vidc_buffer_iris33.c",
            "driver/variant/iris33/src/msm_vidc_power_iris33.c",
            "driver/variant/iris33/src/msm_vidc_bus_iris33.c",
            "driver/variant/iris33/src/msm_vidc_clock_iris33.c",
            "driver/variant/iris33/src/msm_vidc_iris33.c",
        ],
        "CONFIG_MSM_VIDC_SUN" : [
            "driver/platform/sun/src/sun.c",
            "driver/variant/iris35/src/msm_vidc_buffer_iris35.c",
            "driver/variant/iris35/src/msm_vidc_power_iris35.c",
            "driver/variant/iris35/src/msm_vidc_bus_iris35.c",
            "driver/variant/iris35/src/msm_vidc_clock_iris35.c",
            "driver/variant/iris35/src/msm_vidc_iris35.c",
        ],
        "CONFIG_MSM_VIDC_CANOE" : [
            "driver/platform/canoe/src/canoe.c",
            "driver/platform/alor/src/alor.c",
            "driver/variant/iris4/src/msm_vidc_buffer_iris4.c",
            "driver/variant/iris4/src/msm_vidc_power_iris4.c",
            "driver/variant/iris4/src/msm_vidc_bus_iris4.c",
            "driver/variant/iris4/src/msm_vidc_clock_iris4.c",
            "driver/variant/iris4/src/msm_vidc_iris4.c",
        ],
        "CONFIG_MSM_VIDC_SERAPH" : [
            "driver/platform/seraph/src/seraph.c",
            "driver/variant/iris4/src/msm_vidc_buffer_iris4.c",
            "driver/variant/iris4/src/msm_vidc_power_iris4.c",
            "driver/variant/iris4/src/msm_vidc_bus_iris4.c",
            "driver/variant/iris4/src/msm_vidc_clock_iris4.c",
            "driver/variant/iris4/src/msm_vidc_iris4.c",
        ],
        "CONFIG_MSM_VIDC_MINIDUMP": [
            "driver/vidc/src/msm_vidc_md.c",
        ],
    },
    deps = [
            "//vendor/qcom/opensource/mm-drivers:mm_drivers_headers",
            "//vendor/qcom/opensource/synx-kernel:synx_headers",
            "//vendor/qcom/opensource/synx-kernel:%b_modules",
            "//vendor/qcom/opensource/mm-drivers/hw_fence:%b_msm_hw_fence",
            "//vendor/qcom/opensource/mmrm-driver:%b_mmrm_driver",
        ],
)
